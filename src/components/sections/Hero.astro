---
import { urlStructure, type Language } from '../../lib/i18n';
import { ArrowRight, ArrowLeft, Rocket, Shield, Clock, CheckCircle, Play } from 'lucide-astro';

interface Props {
  lang: Language;
  badge: string;
  title: string;
  titleHighlight?: string;
  subtitle: string;
  ctaPrimary: string;
  ctaSecondary: string;
  ctaPrimaryLink?: string;
  ctaSecondaryLink?: string;
  image: string;
  imageAlt: string;
  trustBadges?: { icon: string; text: string }[];
}

const { 
  lang, 
  badge, 
  title, 
  titleHighlight, 
  subtitle, 
  ctaPrimary, 
  ctaSecondary,
  ctaPrimaryLink,
  ctaSecondaryLink,
  image, 
  imageAlt,
  trustBadges = []
} = Astro.props;

const dir = lang === 'ar' ? 'rtl' : 'ltr';
const isRTL = dir === 'rtl';
const Arrow = isRTL ? ArrowLeft : ArrowRight;

const primaryLink = ctaPrimaryLink || urlStructure[lang].contact;
const secondaryLink = ctaSecondaryLink || urlStructure[lang].projects;

const iconMap: Record<string, any> = {
  rocket: Rocket,
  shield: Shield,
  clock: Clock
};
---

<section class="relative min-h-screen flex items-center bg-gradient-to-br from-slate-900 via-primary-900 to-slate-900 overflow-hidden">
  <!-- Animated Background -->
  <div class="absolute inset-0">
    <!-- Gradient Orbs -->
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-primary-500/30 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-teal-500/20 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 1s"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-secondary-500/10 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 2s"></div>
    
    <!-- Grid Pattern -->
    <div class="absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:50px_50px]"></div>
    
    <!-- Floating Particles -->
    <div class="particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
  </div>
  
  <div class="container mx-auto px-4 py-20 relative z-10">
    <div class={`grid lg:grid-cols-2 gap-12 items-center ${isRTL ? 'lg:flex-row-reverse' : ''}`}>
      <!-- Text Content -->
      <div class={`hero-content ${isRTL ? 'text-right lg:order-2' : 'text-left lg:order-1'}`}>
        <!-- Badge -->
        <span class="inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white/90 rounded-full text-sm font-medium mb-6 border border-white/20 hero-badge">
          <span class="w-2 h-2 bg-teal-400 rounded-full animate-pulse"></span>
          {badge}
        </span>
        
        <!-- Title -->
        <h1 class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-6 leading-tight hero-title">
          <span class="block">{title}</span>
          {titleHighlight && (
            <span class={`block text-transparent bg-clip-text bg-gradient-to-${isRTL ? 'l' : 'r'} from-teal-400 via-primary-400 to-secondary-400 animate-gradient`}>
              {titleHighlight}
            </span>
          )}
        </h1>
        
        <!-- Subtitle -->
        <p class="text-xl text-gray-300 mb-8 leading-relaxed max-w-xl hero-subtitle">
          {subtitle}
        </p>
        
        <!-- CTAs -->
        <div class={`flex flex-wrap gap-4 mb-10 hero-ctas ${isRTL ? 'justify-end' : 'justify-start'}`}>
          <a 
            href={primaryLink} 
            class="group inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-primary-500 to-teal-500 text-white font-semibold rounded-full hover:shadow-lg hover:shadow-primary-500/30 transition-all duration-300 hover:scale-105"
          >
            {ctaPrimary}
            <Arrow class={`w-5 h-5 transition-transform group-hover:translate-x-1 ${isRTL ? 'rotate-180 group-hover:-translate-x-1' : ''}`} />
          </a>
          <a 
            href={secondaryLink} 
            class="group inline-flex items-center gap-2 px-8 py-4 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-full border border-white/20 hover:bg-white/20 transition-all duration-300"
          >
            <Play class="w-5 h-5" />
            {ctaSecondary}
          </a>
        </div>
        
        <!-- Trust Badges -->
        {trustBadges.length > 0 && (
          <div class={`flex flex-wrap gap-8 hero-badges ${isRTL ? 'justify-end' : 'justify-start'}`}>
            {trustBadges.map((badge, index) => {
              const Icon = iconMap[badge.icon] || Rocket;
              return (
                <div class="flex items-center gap-3 text-gray-300 group" style={`animation-delay: ${index * 0.1}s`}>
                  <div class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-teal-500/20 transition-colors">
                    <Icon class="w-5 h-5 text-teal-400" />
                  </div>
                  <span class="text-sm font-medium">{badge.text}</span>
                </div>
              );
            })}
          </div>
        )}
      </div>
      
      <!-- Hero Visual -->
      <div class={`relative hero-visual ${isRTL ? 'lg:order-1' : 'lg:order-2'}`}>
        <!-- Main Image Container -->
        <div class="relative">
          <!-- Glow Effect -->
          <div class="absolute -inset-4 bg-gradient-to-r from-primary-500/20 to-teal-500/20 rounded-3xl blur-2xl"></div>
          
          <!-- Image -->
          <div class="relative bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-sm rounded-3xl p-2 border border-white/10">
            <img 
              src={image} 
              alt={imageAlt} 
              class="w-full rounded-2xl shadow-2xl"
              loading="eager"
            />
          </div>
          
          <!-- Floating Cards -->
          <div class={`absolute -bottom-6 ${isRTL ? '-left-6' : '-right-6'} bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20 animate-float shadow-xl`}>
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-teal-600 rounded-xl flex items-center justify-center">
                <CheckCircle class="w-6 h-6 text-white" />
              </div>
              <div class={isRTL ? 'text-right' : 'text-left'}>
                <p class="text-2xl font-bold text-white">100+</p>
                <p class="text-sm text-gray-300">{isRTL ? 'مشروع مكتمل' : lang === 'no' ? 'Fullførte prosjekter' : 'Completed Projects'}</p>
              </div>
            </div>
          </div>
          
          <div class={`absolute -top-4 ${isRTL ? '-right-4' : '-left-4'} bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20 animate-float shadow-xl`} style="animation-delay: 0.5s">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-xl flex items-center justify-center">
                <Rocket class="w-6 h-6 text-white" />
              </div>
              <div class={isRTL ? 'text-right' : 'text-left'}>
                <p class="text-2xl font-bold text-white">98%</p>
                <p class="text-sm text-gray-300">{isRTL ? 'رضا العملاء' : lang === 'no' ? 'Kundetilfredshet' : 'Client Satisfaction'}</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Decorative Elements -->
        <div class="absolute -z-10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%]">
          <div class="absolute inset-0 border border-white/5 rounded-full animate-spin-slow"></div>
          <div class="absolute inset-8 border border-white/5 rounded-full animate-spin-slow" style="animation-direction: reverse"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/50">
    <span class="text-xs uppercase tracking-widest">{isRTL ? 'مرر للأسفل' : lang === 'no' ? 'Scroll ned' : 'Scroll down'}</span>
    <div class="w-6 h-10 border-2 border-white/30 rounded-full flex justify-center pt-2">
      <div class="w-1.5 h-1.5 bg-white/50 rounded-full animate-bounce"></div>
    </div>
  </div>
</section>

<style>
  /* Animations */
  @keyframes pulse-slow {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.1); }
  }
  
  @keyframes gradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  @keyframes spin-slow {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  @keyframes particle-float {
    0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
  }
  
  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }
  
  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient 3s ease infinite;
  }
  
  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }
  
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }
  
  /* Particles */
  .particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }
  
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    animation: particle-float 15s infinite;
  }
  
  .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
  .particle:nth-child(2) { left: 30%; animation-delay: 3s; }
  .particle:nth-child(3) { left: 50%; animation-delay: 6s; }
  .particle:nth-child(4) { left: 70%; animation-delay: 9s; }
  .particle:nth-child(5) { left: 90%; animation-delay: 12s; }
  
  /* Hero Content Animations */
  .hero-content {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
  }
  
  .hero-badge {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.1s;
  }
  
  .hero-title {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.2s;
  }
  
  .hero-subtitle {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.3s;
  }
  
  .hero-ctas {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.4s;
  }
  
  .hero-badges {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.5s;
  }
  
  .hero-visual {
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
    animation-delay: 0.3s;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
