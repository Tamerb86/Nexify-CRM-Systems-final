---
import SectionTitle from '../ui/SectionTitle.astro';
import { urlStructure, type Language } from '../../lib/i18n';
import { CheckCircle } from 'lucide-astro';

interface Plan {
  name: string;
  description: string;
  price: string;
  currency: string;
  features: string[];
  cta: string;
  popular?: boolean;
}

interface Props {
  lang: Language;
  badge: string;
  title: string;
  subtitle: string;
  plans: Plan[];
  popularLabel?: string;
}

const { lang, badge, title, subtitle, plans, popularLabel = 'Most Popular' } = Astro.props;
---

<section class="py-20 bg-gray-50">
  <div class="container mx-auto px-4">
    <SectionTitle badge={badge} title={title} subtitle={subtitle} />
    
    <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
      {plans.map((plan, index) => (
        <div class={`scroll-animate relative bg-white rounded-2xl p-8 hover:-translate-y-1 transition-all ${plan.popular ? 'ring-2 ring-teal-500 shadow-xl scale-105' : 'shadow-lg hover:shadow-xl'}`} style={`transition-delay: ${index * 150}ms`}>
          {plan.popular && (
            <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
              <span class="px-4 py-1 bg-gradient-to-r from-primary to-teal-500 text-white text-sm font-medium rounded-full">
                {popularLabel}
              </span>
            </div>
          )}
          <div class="text-center mb-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-2">{plan.name}</h3>
            <p class="text-gray-600 mb-4">{plan.description}</p>
            <div class="flex items-baseline justify-center gap-1">
              <span class="text-4xl font-bold text-gray-900">{plan.price}</span>
              <span class="text-gray-500">{plan.currency}</span>
            </div>
          </div>
          <ul class="space-y-4 mb-8">
            {plan.features.map((feature) => (
              <li class="flex items-center gap-3">
                <CheckCircle class="w-5 h-5 text-teal-500 flex-shrink-0" />
                <span class="text-gray-600">{feature}</span>
              </li>
            ))}
          </ul>
          <a 
            href={urlStructure[lang].contact} 
            class={`block w-full text-center py-3 rounded-xl font-medium transition-colors ${
              plan.popular 
                ? 'bg-gradient-to-r from-primary to-teal-500 text-white hover:opacity-90' 
                : 'bg-gray-100 text-gray-900 hover:bg-gray-200'
            }`}
          >
            {plan.cta}
          </a>
        </div>
      ))}
    </div>
  </div>
</section>
